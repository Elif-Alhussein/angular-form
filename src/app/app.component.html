<div class="max-w-4xl mx-auto p-6 m-30 border shadow-md bg-white">
  <h2 class="text-2xl font-semibold mb-6">Contact Information</h2>

  <form #contactForm="ngForm" (ngSubmit)="onSubmit(contactForm)" novalidate>
    <!-- Name and surname -->

    <!-- Name -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block font-medium mb-3">Name *</label>
        <input
          type="text"
          name="name"
          ngModel
          required
          class="w-full border px-3 py-2"
        />

        @if (submitted && contactForm.form.controls['name'].invalid) {
        <small class="text-red-500">Name is required</small>
        }
      </div>
      <!-- Surname -->
      <div>
        <label class="block font-medium mb-3">Surname *</label>
        <input
          type="text"
          name="surname"
          ngModel
          required
          class="w-full border px-3 py-2"
        />
        @if (submitted && contactForm.form.controls['surname'].invalid) {
        <small class="text-red-500">Surname is required</small>
        }
      </div>
    </div>

    <!-- Email -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
      <div>
        <label class="block font-medium">Email *</label>
        <input
          type="email"
          name="email"
          ngModel
          required
          class="w-full border px-3 py-2"
        />
        @if(submitted && (contactForm.controls['email'].invalid ||
        !isValidEmail(contactForm.value.email))) {
        <small class="text-red-500">
          {{
            !isValidEmail(contactForm.value.email)
              ? "Please enter a valid email address"
              : "Email is required"
          }}
        </small>
        }
      </div>
      <!-- Repeat Email -->
      <div>
        <label class="block font-medium">Repeat Email *</label>
        <input
          type="email"
          name="repeatemail"
          ngModel
          required
          class="w-full border px-3 py-2"
        />
        @if (submitted && (contactForm.controls['repeatemail'].invalid ||
        !isValidEmail(contactForm.value.repeatemail))) {
        <small class="text-red-500">
          {{
            !isValidEmail(contactForm.value.repeatemail)
              ? "Please enter a valid email address"
              : "Repeat email is required"
          }}
        </small>
        }
      </div>
      @if (submitted && contactForm.value.email !==
      contactForm.value.repeatemail) {
      <small class="text-red-500">Emails do not match.</small>
      }
    </div>

    <!-- Country Code and Phone Number -->

    <!-- Country Code -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
      <div>
        <label class="block font-medium">Country Code *</label>
        <p-dropdown
          [options]="codes"
          [(ngModel)]="selectedCode"
          name="code"
          required
          placeholder="Select a country"
          class="w-full"
        ></p-dropdown>
        @if (submitted && !selectedCode) {
        <small class="text-red-500">Country code is required</small>
        }
      </div>

      <!-- Phone Number -->
      <div>
        <label class="block font-medium">Phone Number *</label>
        <input
          type="text"
          name="phone"
          maxlength="10"
          ngModel
          required
          class="w-full border px-3 py-2"
        />
        @if (submitted && contactForm.form.controls['phone'].invalid) {
        <small class="text-red-500">Phone number is required</small>
        }
      </div>
    </div>

    <!-- Country -->
    <div class="mt-4">
      <label class="block font-medium">Country *</label>
      <p-dropdown
        [options]="countries"
        [(ngModel)]="selectedCountry"
        name="country"
        required
        placeholder="Select a country"
        class="w-full"
      ></p-dropdown>
      @if (submitted && !selectedCountry) {
      <small class="text-red-500">Country is required</small>
      }
    </div>

    <!-- City and Adress -->

    <!-- City -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
      <div>
        <label class="block font-medium">City *</label>
        <input
          type="text"
          name="city"
          ngModel
          required
          class="w-full border px-3 py-2"
        />
        @if (submitted && contactForm.form.controls['city'].invalid) {
        <small class="text-red-500">City is required</small>
        }
      </div>

      <!-- Address -->
      <div>
        <label class="block font-medium">Address *</label>
        <input
          type="text"
          name="address"
          ngModel
          required
          class="w-full border px-3 py-2"
        />
        @if (submitted && contactForm.form.controls['address'].invalid) {
        <small class="text-red-500">Address is required</small>
        }
      </div>
    </div>

    <!-- Zipcode -->
    <div class="mt-4">
      <label class="block font-medium">Zipcode *</label>
      <input
        type="text"
        name="zipcode"
        ngModel
        required
        class="w-full border px-3 py-2"
      />
      @if (submitted && contactForm.form.controls['zipcode'].invalid) {
      <small class="text-red-500">Zipcode is required</small>
      }
    </div>

    <!-- CheckBox -->
    <div class="mt-4 flex items-center">
      <div>
        <p-checkbox
          [(ngModel)]="isParticipating"
          name="participate"
          inputId="participate"
          binary="true"
          required
        ></p-checkbox>
        <label for="participate" class="ml-2"
          >I am participating in the journey myself.</label
        >
      </div>
      @if (submitted && !isParticipating) {
      <small class="text-red-500">You must confirm your participation</small>
      }
    </div>

    <!-- Save Button -->
    <div class="mt-8">
      <p-button
        label="Save"
        type="submit"
        [styleClass]="
          'bg-blue-500 text-white px-4 py-2 rounded border-none shadow-md'
        "
      />
    </div>
  </form>
</div>
